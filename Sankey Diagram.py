import plotly.graph_objects as go

# Define nodes and links based on provided data
nodes = [
    dict(label='T1-1', year='2019', color='red'),
    dict(label='T1-2', year='2019', color='red'),
    dict(label='T1-3', year='2019', color='red'),
    dict(label='T1-4', year='2019', color='red'),
    dict(label='T1-5', year='2019', color='red'),
    dict(label='T1-6', year='2019', color='red'),
    dict(label='T1-7', year='2019', color='red'),
    dict(label='T1-8', year='2019', color='red'),
    dict(label='T1-9', year='2019', color='red'),
    dict(label='T1-10', year='2019', color='red'),
    dict(label='T1-11', year='2019', color='red'),
    dict(label='T2-1', year='2020', color='blue'),
    dict(label='T2-2', year='2020', color='blue'),
    dict(label='T2-3', year='2020', color='blue'),
    dict(label='T2-4', year='2020', color='blue'),
    dict(label='T2-5', year='2020', color='blue'),
    dict(label='T3-1', year='2021', color='green'),
    dict(label='T3-2', year='2021', color='green'),
    dict(label='T3-3', year='2021', color='green'),
    dict(label='T3-4', year='2021', color='green'),
    dict(label='T3-5', year='2021', color='green'),
    dict(label='T3-6', year='2021', color='green'),
    dict(label='T3-7', year='2021', color='green'),
    dict(label='T3-8', year='2021', color='green'),
    dict(label='T3-9', year='2021', color='green'),
    dict(label='T3-10', year='2021', color='green'),
    dict(label='T3-11', year='2021', color='green'),
    dict(label='T3-12', year='2021', color='green'),
    dict(label='T4-1', year='2022', color='purple'),
    dict(label='T4-2', year='2022', color='purple'),
    dict(label='T4-3', year='2022', color='purple'),
    dict(label='T4-4', year='2022', color='purple'),
    dict(label='T4-5', year='2022', color='purple'),
    dict(label='T4-6', year='2022', color='purple'),
    dict(label='T5-7', year='2023', color='orange'),
    dict(label='T5-8', year='2023', color='orange'),
    dict(label='T5-2', year='2023', color='orange'),
    dict(label='T5-3', year='2023', color='orange'),
    dict(label='T5-4', year='2023', color='orange'),
    dict(label='T5-5', year='2023', color='orange'),
    dict(label='T5-9', year='2023', color='orange'),
    dict(label='T5-10', year='2023', color='orange'),
    dict(label='T5-6', year='2023', color='orange'),
     dict(label='T5-1', year='2023', color='orange'),
]

links = [
    dict(source='T1-1', target='T2-4', value=0),
    dict(source='T1-4', target='T2-4', value=0),
    dict(source='T1-8', target='T2-4', value=0),
    dict(source='T1-2', target='T2-4', value=0.3),
    dict(source='T1-3', target='T2-1', value=0.3),
    dict(source='T1-3', target='T2-4', value=0.5),
    dict(source='T1-3', target='T2-5', value=0.2),
    dict(source='T1-5', target='T2-2', value=0.6),
    dict(source='T1-5', target='T2-5', value=0.1),
    dict(source='T1-6', target='T2-4', value=0.3),
    dict(source='T1-6', target='T2-5', value=0.15),
    dict(source='T1-7', target='T2-2', value=0.5),
    dict(source='T1-9', target='T2-1', value=0.7),
    dict(source='T1-9', target='T2-2', value=0.2),
    dict(source='T1-10', target='T2-5', value=0.15),
    dict(source='T1-11', target='T2-5', value=0.1),
    dict(source='T2-1', target='T3-1', value=0.25),
    dict(source='T2-1', target='T3-3', value=0.3),
    dict(source='T2-1', target='T3-5', value=0.15),
    dict(source='T2-1', target='T3-7', value=0.2),
    dict(source='T2-1', target='T3-8', value=0.2),
    dict(source='T2-1', target='T3-9', value=0.2),
    dict(source='T2-1', target='T3-10', value=0.2),
    dict(source='T2-2', target='T3-1', value=0.2),
    dict(source='T2-2', target='T3-2', value=0.2),
    dict(source='T2-2', target='T3-3', value=0.2),
    dict(source='T2-2', target='T3-4', value=0.2),
    dict(source='T2-2', target='T3-7', value=0.3),
    dict(source='T2-2', target='T3-8', value=0.2),
    dict(source='T2-2', target='T3-9', value=0.2),
    dict(source='T2-2', target='T3-10', value=0.2),
    dict(source='T2-3', target='T3-3', value=0.2),
    dict(source='T2-3', target='T3-5', value=0.3),
    dict(source='T2-3', target='T3-6', value=0.2),
    dict(source='T2-3', target='T3-7', value=0.2),
    dict(source='T2-3', target='T3-12', value=0.2),
    dict(source='T2-4', target='T3-1', value=0.4),
    dict(source='T2-4', target='T3-2', value=0.2),
    dict(source='T2-4', target='T3-4', value=0.5),
    dict(source='T2-4', target='T3-6', value=0.2),
    dict(source='T2-4', target='T3-8', value=0.3),
    dict(source='T2-4', target='T3-10', value=0.2),
    dict(source='T2-4', target='T3-12', value=0.2),
    dict(source='T2-5', target='T3-2', value=0.15),
    dict(source='T2-5', target='T3-5', value=0.2),
    dict(source='T2-5', target='T3-6', value=0.2),
    dict(source='T2-5', target='T3-7', value=0.2),
    dict(source='T2-5', target='T3-8', value=0.2),
    dict(source='T3-1', target='T4-1', value=0.4),
    dict(source='T3-1', target='T4-2', value=0.3),
    dict(source='T3-1', target='T4-3', value=0.5),
    dict(source='T3-1', target='T4-5', value=0.15),
    dict(source='T3-2', target='T4-2', value=0.4),
    dict(source='T3-2', target='T4-5', value=0.3),
    dict(source='T3-2', target='T4-6', value=0.3),
    dict(source='T3-3', target='T4-2', value=0.2),
    dict(source='T3-3', target='T4-3', value=0.7),
    dict(source='T3-4', target='T4-4', value=0.4),
    dict(source='T3-5', target='T4-1', value=0.2),
    dict(source='T3-5', target='T4-2', value=0.2),
    dict(source='T3-5', target='T4-5', value=0.5),
    dict(source='T3-5', target='T4-6', value=0.5),
    dict(source='T3-6', target='T4-2', value=0.3),
    dict(source='T3-6', target='T4-3', value=0.3),
    dict(source='T3-6', target='T4-4', value=0.3),
    dict(source='T3-7', target='T4-1', value=0.2),
    dict(source='T3-8', target='T4-2', value=0.3),
    dict(source='T3-8', target='T4-4', value=0.3),
    dict(source='T3-8', target='T4-5', value=0.3),
    dict(source='T3-8', target='T4-6', value=0.4),
    dict(source='T3-9', target='T4-1', value=0.3),
    dict(source='T3-11', target='T4-1', value=0.2),
    dict(source='T3-11', target='T4-4', value=0.3),
    dict(source='T3-11', target='T4-5', value=0.3),
    dict(source='T3-11', target='T4-6', value=0.3),
    dict(source='T3-12', target='T4-5', value=0.3),
    dict(source='T3-12', target='T4-6', value=0.3),
    dict(source='T4-1', target='T5-7', value=0.2),
    dict(source='T4-1', target='T5-8', value=0.3),
    dict(source='T4-2', target='T5-2', value=0.5),
    dict(source='T4-2', target='T5-3', value=0.3),
    dict(source='T4-2', target='T5-4', value=0.3),
    dict(source='T4-2', target='T5-5', value=0.4),
    dict(source='T4-2', target='T5-7', value=0.2),
    dict(source='T4-2', target='T5-8', value=0.2),
    dict(source='T4-2', target='T5-9', value=0.4),
    dict(source='T4-2', target='T5-10', value=0.3),
    dict(source='T4-3', target='T5-4', value=0.4),
    dict(source='T4-3', target='T5-6', value=0.25),
    dict(source='T4-3', target='T5-7', value=0.2),
    dict(source='T4-3', target='T5-8', value=0.3),
    dict(source='T4-3', target='T5-10', value=0.3),
    dict(source='T4-4', target='T5-4', value=0.2),
    dict(source='T4-4', target='T5-6', value=0.3),
    dict(source='T4-4', target='T5-7', value=0.2),
    dict(source='T4-4', target='T5-8', value=0.2),
    dict(source='T4-5', target='T5-4', value=0.5),
    dict(source='T4-5', target='T5-6', value=0.5),
    dict(source='T4-5', target='T5-7', value=0.2),
    dict(source='T4-5', target='T5-8', value=0.3),
    dict(source='T4-6', target='T5-4', value=0.3),
    dict(source='T4-6', target='T5-6', value=0.5),
    dict(source='T4-6', target='T5-7', value=0.2),
    dict(source='T4-6', target='T5-8', value=0.2),
    dict(source='T4-6', target='T5-9', value=0.3),
    dict(source='T4-6', target='T5-1', value=0),
]

# Create figure
fig = go.Figure(data=[go.Sankey(
    node=dict(
        pad=15,
        thickness=20,
        line=dict(color="black", width=0.5),
        label=[node['label'] for node in nodes],
        color=[node['color'] for node in nodes]
    ),
    link=dict(
        source=[nodes.index(next(filter(lambda n: n['label'] == link['source'], nodes))) for link in links],
        target=[nodes.index(next(filter(lambda n: n['label'] == link['target'], nodes))) for link in links],
        value=[link['value'] for link in links],

    )
)])

# Update layout
fig.update_layout(
    font=dict(size=8, family="Times New Roman")
)

# Display figure
fig.show()
